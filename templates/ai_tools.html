<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='global.css') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tools Explorer</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

body {
    margin: 0;
    padding: 0;
    background: #0A0A0A;
    font-family: 'Inter', sans-serif;
    color: white;
}

/* ⭐ TOP BUTTONS BLOCK ⭐ */
.top-controls {
    width: 100%;
    max-width: 1200px;
    margin: 20px auto 10px auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    text-align: center;
}

/* Home Button */
.home-btn {
    padding: 10px 20px;
    border-radius: 10px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.2);
    color: white;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
}

/* Title */
.title {
    font-size: 32px;
    font-weight: 800;
    background: linear-gradient(135deg, #FFD44D, white);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* Search + Sort Row */
.top-row {
    width: 100%;
    max-width: 900px;
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

.search-box input {
    width: 300px;
    padding: 12px;
    border-radius: 8px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.2);
    color: white;
}

.sort-select {
    padding: 12px;
    border-radius: 8px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.2);
    color: white;
}

/* Category Buttons */
.categories {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
}

.category {
    padding: 8px 16px;
    border-radius: 10px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    cursor: pointer;
    font-size: 14px;
    color: white;
}

.category.active {
    background: #FFD44D;
    color: black;
    font-weight: 700;
}

/* ⭐ FIXED TOOLS GRID ⭐ */
.tools-grid {
    width: 100%;
    max-width: 1200px;
    margin: 40px auto 60px auto;

    display: flexbox;
    flex-direction: column;
    align-items: center;
    gap: 15px;

    display: grid !important;
    grid-template-columns: repeat(4, 1fr);
    justify-items: center;
    gap: 20px;
}

/* Tool Cards */
.tool-card {
    width: 100%;
    padding: 20px;
    border-radius: 14px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.08);
}

.tool-card h2 {
    font-size: 18px;
    font-weight: 700;
    color: #FFD44D;
}

.tool-card p {
    font-size: 12px;
    opacity: 0.7;
}
</style>
</head>

<body>

<div class="top-controls">

    <a href="/home" class="home-btn">← Go Home</a>

    <h1 class="title">AI Tools Explorer</h1>

    <div class="top-row">
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search AI tool..." onkeyup="filterTools()">
        </div>

        <select id="sortSelect" class="sort-select" onchange="sortTools()">
            <option value="az">Sort A → Z</option>
            <option value="za">Sort Z → A</option>
        </select>
    </div>

    <!-- ⭐ FIXED CATEGORY BUTTONS ⭐ -->
    <div class="categories">
        <div class="category active" onclick="filterCategory('all', this)">All</div>
        <div class="category" onclick="filterCategory('research', this)">Research</div>
        <div class="category" onclick="filterCategory('writing & editing', this)">Writing</div>
        <div class="category" onclick="filterCategory('coding & programming', this)">Coding</div>
        <div class="category" onclick="filterCategory('design & presentation', this)">Design</div>
        <div class="category" onclick="filterCategory('note-taking & study', this)">Study</div>
        <div class="category" onclick="filterCategory('mathematics & science', this)">Math</div>
    </div>

</div>

<div class="tools-grid" id="toolsGrid"></div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    fetch("/static/data/ai_tools.json")
        .then(res => res.json())
        .then(data => loadTools(data.ai_tools_for_students));
});

let TOOL_DATA = [];

function loadTools(categories) {
    const grid = document.getElementById("toolsGrid");
    grid.innerHTML = "";
    TOOL_DATA = [];

    categories.forEach(cat => {
        let catTag = cat.category.toLowerCase();

        cat.tools.forEach(tool => {
            TOOL_DATA.push({ name: tool, category: catTag });
        });
    });

    renderTools(TOOL_DATA);
}

function renderTools(list) {
    const grid = document.getElementById("toolsGrid");
    grid.innerHTML = "";

    list.forEach(t => {
        grid.innerHTML += `
            <div class="tool-card" data-category="${t.category}" data-name="${t.name.toLowerCase()}">
                <h2>${t.name}</h2>
                <p>${t.category.toUpperCase()}</p>
            </div>
        `;
    });
}

function filterTools() {
    let text = document.getElementById("searchInput").value.toLowerCase();
    document.querySelectorAll(".tool-card").forEach(t => {
        let name = t.getAttribute("data-name");
        t.style.display = name.includes(text) ? "block" : "none";
    });
}

function filterCategory(cat, element) {
    document.querySelectorAll(".category").forEach(c => c.classList.remove("active"));
    element.classList.add("active");

    document.querySelectorAll(".tool-card").forEach(t => {
        let category = t.getAttribute("data-category");
        t.style.display = (cat === "all" || category === cat) ? "block" : "none";
    });
}

function sortTools() {
    let type = document.getElementById("sortSelect").value;

    let sorted = [...TOOL_DATA];

    sorted.sort((a, b) =>
        type === "az"
            ? a.name.localeCompare(b.name)
            : b.name.localeCompare(a.name)
    );

    renderTools(sorted);
}
</script>

</body>
</html>
